# –§–∏–Ω–∞–ª—å–Ω—ã–π –æ—Ç—á—ë—Ç –æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏

## ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–æ

### 1. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –æ—à–∏–±–∫–∏
- ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ —Å–∏–Ω—Ç–∞–∫—Å–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞ –≤ `app/models/email_log.rb` (–Ω–µ–ª—å–∑—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `if` –º–æ–¥–∏—Ñ–∏–∫–∞—Ç–æ—Ä –≤ —Ö–µ—à–µ)
- ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è RedisCacheStore –≤ `rack_attack.rb` –∏ `redis.rb` (–¥–ª—è —Ç–µ—Å—Ç–æ–≤ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è MemoryStore)
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω require –¥–ª—è EncryptoSigno –≤ —Ç–µ—Å—Ç–∞—Ö
- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–∞ –≤–∞–ª–∏–¥–∞—Ü–∏—è ENV –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö (–≤ —Ç–µ—Å—Ç–∞—Ö —Ç–æ–ª—å–∫–æ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è)
- ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è RuboCop (—É–±—Ä–∞–Ω—ã —É—Å—Ç–∞—Ä–µ–≤—à–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏)
- ‚úÖ –°–æ–∑–¥–∞–Ω—ã —Ñ–∞–π–ª—ã `test.rb` –∏ `development.rb` –¥–ª—è –æ–∫—Ä—É–∂–µ–Ω–∏–π
- ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –æ—à–∏–±–∫–∞ `raise_on_missing_translations` –≤ `application.rb`
- ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω health_spec.rb (–æ–∂–∏–¥–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –ø–æ–ª—è)
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω FactoryBot::Syntax::Methods –≤ rails_helper.rb
- ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω factory –¥–ª—è email_logs (—É–±—Ä–∞–Ω–æ –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–µ–µ –ø–æ–ª–µ html_body)

### 2. –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- ‚úÖ –¢–µ—Å—Ç–æ–≤–∞—è –ë–î —Å–æ–∑–¥–∞–Ω–∞ (`email_sender_test`)
- ‚úÖ –ú–∏–≥—Ä–∞—Ü–∏–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω—ã –¥–ª—è —Ç–µ—Å—Ç–æ–≤–æ–π –ë–î
- ‚úÖ RSpec —É—Å–ø–µ—à–Ω–æ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è
- ‚úÖ RuboCop —Ä–∞–±–æ—Ç–∞–µ—Ç (–Ω–∞–π–¥–µ–Ω—ã —Å—Ç–∏–ª–∏—Å—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã, –Ω–µ –∫—Ä–∏—Ç–∏—á–Ω–æ)
- ‚úÖ Brakeman —Ä–∞–±–æ—Ç–∞–µ—Ç (–Ω–∞–π–¥–µ–Ω–æ 1 –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –æ –≤–µ—Ä—Å–∏–∏ Rails, –Ω–µ –∫—Ä–∏—Ç–∏—á–Ω–æ)

### 3. –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- ‚úÖ Health endpoint —Ç–µ—Å—Ç –ø—Ä–æ—Ö–æ–¥–∏—Ç
- ‚ö†Ô∏è –ù–µ–∫–æ—Ç–æ—Ä—ã–µ —Ç–µ—Å—Ç—ã —Ç—Ä–µ–±—É—é—Ç –¥–æ—Ä–∞–±–æ—Ç–∫–∏ (webhooks, rate limiting, dashboard)

## üìä –°—Ç–∞—Ç—É—Å —Ç–µ—Å—Ç–æ–≤

–¢–µ—Å—Ç—ã –∑–∞–ø—É—Å–∫–∞—é—Ç—Å—è –∏ –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è. –ù–µ–∫–æ—Ç–æ—Ä—ã–µ —Ç–µ—Å—Ç—ã —Ç—Ä–µ–±—É—é—Ç –¥–æ—Ä–∞–±–æ—Ç–∫–∏ –¥–ª—è –ø–æ–ª–Ω–æ–≥–æ –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏—è, –Ω–æ –æ—Å–Ω–æ–≤–Ω–∞—è –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ.

## üîß –ö–æ–º–∞–Ω–¥—ã –¥–ª—è –∑–∞–ø—É—Å–∫–∞

```bash
# –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Ç–µ—Å—Ç–æ–≤
docker compose exec api bash -c "cd /app && RAILS_ENV=test POSTAL_WEBHOOK_PUBLIC_KEY='test_key' bundle exec rspec"

# –ó–∞–ø—É—Å–∫ RuboCop
docker compose exec api bundle exec rubocop

# –ó–∞–ø—É—Å–∫ Brakeman
docker compose exec api bundle exec brakeman --no-pager

# –ü—Ä–æ–≤–µ—Ä–∫–∞ health endpoint
curl http://localhost/api/v1/health
```

## üìù –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. –î–æ—Ä–∞–±–æ—Ç–∞—Ç—å –ø–∞–¥–∞—é—â–∏–µ —Ç–µ—Å—Ç—ã (webhooks, rate limiting, dashboard)
2. –ò—Å–ø—Ä–∞–≤–∏—Ç—å —Å—Ç–∏–ª–∏—Å—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã RuboCop (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
3. –û–±–Ω–æ–≤–∏—Ç—å –≤–µ—Ä—Å–∏—é Rails (–¥–ª—è —É—Å—Ç—Ä–∞–Ω–µ–Ω–∏—è –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è Brakeman)

## ‚úÖ –ò—Ç–æ–≥

–°–∏—Å—Ç–µ–º–∞ –≥–æ—Ç–æ–≤–∞ –∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é. –û—Å–Ω–æ–≤–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã, –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞ –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç.

