# üîê –ê–ù–ê–õ–ò–ó –°–ò–°–¢–ï–ú–´ –ê–£–¢–ï–ù–¢–ò–§–ò–ö–ê–¶–ò–ò
## –ü–æ—á–µ–º—É –ù–ï —Ç—Ä–æ–≥–∞–µ–º –ø—É–Ω–∫—Ç—ã 1 –∏ 2

**–î–∞—Ç–∞:** 2026-01-11
**–°—Ç–∞—Ç—É—Å:** üü° –†–ê–ë–û–¢–ê–ï–¢ –ë–ï–ó –ê–£–¢–ï–ù–¢–ò–§–ò–ö–ê–¶–ò–ò (–Ω–æ —ç—Ç–æ OK –¥–ª—è —Ç–µ–∫—É—â–µ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏)

---

## üìä –¢–ï–ö–£–©–ï–ï –°–û–°–¢–û–Ø–ù–ò–ï

### 1. SMTP Relay (–ø–æ—Ä—Ç 2587)

**–ù–∞–π–¥–µ–Ω–æ –î–í–ï —Å–∏—Å—Ç–µ–º—ã –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏:**

#### –°–∏—Å—Ç–µ–º–∞ –ê: –ü–ª–∞–≥–∏–Ω `smtp_auth.js` ‚ùå –ù–ï –ò–°–ü–û–õ–¨–ó–£–ï–¢–°–Ø
```javascript
// services/smtp-relay/plugins/smtp_auth.js
// –ü–æ–ª–Ω–æ—Ü–µ–Ω–Ω–∞—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è —á–µ—Ä–µ–∑ –ë–î:
// - –ü—Ä–æ–≤–µ—Ä—è–µ—Ç smtp_credentials —Ç–∞–±–ª–∏—Ü—É
// - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç bcrypt –¥–ª—è –ø–∞—Ä–æ–ª–µ–π
// - –¢—Ä–µ–±—É–µ—Ç STARTTLS
// - –û–±–Ω–æ–≤–ª—è–µ—Ç last_used_at
```

**–ü–æ—á–µ–º—É –æ—Ç–∫–ª—é—á–µ–Ω–∞:**
- –í `server.js` —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ `authOptional: true`
- –ü–ª–∞–≥–∏–Ω —Å—É—â–µ—Å—Ç–≤—É–µ—Ç, –Ω–æ –Ω–µ –ø–æ–¥–∫–ª—é—á–µ–Ω
- **–ü–†–ò–ß–ò–ù–ê:** –í–µ—Ä–æ—è—Ç–Ω–æ –±—ã–ª–∏ –ø—Ä–æ–±–ª–µ–º—ã (–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å–æ–æ–±—â–∏–ª)

#### –°–∏—Å—Ç–µ–º–∞ –ë: ENV –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ ‚ùå –ù–ï –ù–ê–°–¢–†–û–ï–ù–ê
```javascript
// –í docker-compose.yml –µ—Å—Ç—å:
SMTP_RELAY_AUTH_REQUIRED: "true"  // –ù–æ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è
SMTP_USERNAME: –Ω–µ –∑–∞–¥–∞–Ω–æ
SMTP_PASSWORD: –Ω–µ –∑–∞–¥–∞–Ω–æ
```

**–¢–µ–∫—É—â–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è:**
```javascript
// server.js:73
authOptional: true,  // ‚Üê –ü—Ä–∏–Ω–∏–º–∞–µ—Ç –í–°–ï–• –±–µ–∑ –ø—Ä–æ–≤–µ—Ä–∫–∏

onAuth(auth, session, callback) {
  // For now, accept all auth attempts
  return callback(null, { user: auth.username });
}
```

---

### 2. API Key –¥–ª—è /api/v1/smtp/receive

**–ö–æ–¥ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –∑–∞—â–∏—Ç—É:**
```ruby
# services/api/app/controllers/api/v1/smtp_controller.rb:101-119

def authenticate_smtp_relay
  relay_key = request.headers['X-SMTP-Relay-Key']
  expected_key = ENV['SMTP_RELAY_API_KEY']

  # –ï—Å–ª–∏ –∫–ª—é—á –Ω–µ –∑–∞–¥–∞–Ω ‚Üí fallback –Ω–∞ IP-based auth
  if expected_key.blank?
    # –ü—Ä–æ–≤–µ—Ä–∫–∞ IP (172.x, 10.x, 127.x)
    client_ip = request.remote_ip
    unless client_ip.start_with?('172.', '10.', '127.')
      return unauthorized
    end
  else
    # –ü—Ä–æ–≤–µ—Ä–∫–∞ API –∫–ª—é—á–∞
    unless secure_compare(relay_key, expected_key)
      return unauthorized
    end
  end
end
```

**–¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ:**
- `SMTP_RELAY_API_KEY` –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –≤ `.env`
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è IP-based authentication
- **–ü–†–ò–ß–ò–ù–ê:** –ë—ã–ª–∏ –ø—Ä–æ–±–ª–µ–º—ã —Å –∫–ª—é—á–∞–º–∏ (–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å–æ–æ–±—â–∏–ª)

---

## ‚ö†Ô∏è –ü–û–ß–ï–ú–£ –≠–¢–û OK (–¥–ª—è —Ç–µ–∫—É—â–µ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏)

### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∑–∞—â–∏—Ç—ã:

```
Internet
    ‚Üì
  Nginx (https://linenarrow.com)
    ‚Üì
  [Firewall/Rate limiting]
    ‚Üì
  Docker Network (172.x.x.x)
    ‚Üì
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ SMTP Relay (port 2587)              ‚îÇ
‚îÇ - –ë–µ–∑ auth, –Ω–æ —Ç–æ–ª—å–∫–æ –¥–ª—è AMS       ‚îÇ
‚îÇ - AMS –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è —Å –≤–∞—à–µ–≥–æ IP      ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
    ‚Üì
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ API /api/v1/smtp/receive            ‚îÇ
‚îÇ - IP-based auth (—Ç–æ–ª—å–∫–æ Docker)     ‚îÇ
‚îÇ - SMTP relay = 172.x.x.x ‚úÖ         ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
    ‚Üì
  Postal
```

### –£—Ä–æ–≤–Ω–∏ –∑–∞—â–∏—Ç—ã:

1. **SMTP Relay (2587):**
   - ‚úÖ Firewall (—Ç–æ–ª—å–∫–æ –≤–∞—à IP –º–æ–∂–µ—Ç –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ 2587)
   - ‚úÖ AMS –Ω–∞—Å—Ç—Ä–æ–µ–Ω –Ω–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π –∞–¥—Ä–µ—Å
   - ‚ö†Ô∏è –ë–µ–∑ SMTP auth (–Ω–æ —ç—Ç–æ OK –µ—Å–ª–∏ firewall –Ω–∞—Å—Ç—Ä–æ–µ–Ω)

2. **API endpoint:**
   - ‚úÖ IP-based auth —Ä–∞–±–æ—Ç–∞–µ—Ç (SMTP relay –≤–Ω—É—Ç—Ä–∏ Docker = 172.x)
   - ‚úÖ –ù–µ–¥–æ—Å—Ç—É–ø–µ–Ω –Ω–∞–ø—Ä—è–º—É—é –∏–∑ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞ (–∑–∞ Nginx)
   - ‚ö†Ô∏è –ú–æ–∂–Ω–æ –æ–±–æ–π—Ç–∏ —á–µ—Ä–µ–∑ X-Forwarded-For (–Ω–æ —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –µ—Å—Ç—å –¥–æ—Å—Ç—É–ø)

3. **Nginx:**
   - ‚úÖ Rate limiting
   - ‚úÖ HTTPS
   - ‚úÖ –ù–µ –ø—Ä–æ–∫—Å–∏—Ä—É–µ—Ç `/api/v1/smtp/receive` –Ω–∞–ø—Ä—è–º—É—é

---

## üîí –†–ò–°–ö–ò –ò –ú–ò–¢–ò–ì–ê–¶–ò–Ø

### –†–∏—Å–∫ #1: SMTP Relay –æ—Ç–∫—Ä—ã—Ç –Ω–∞ 2587
```yaml
# docker-compose.yml
ports:
  - "2587:587"  # ‚Üê –î–æ—Å—Ç—É–ø–µ–Ω –∏–∑ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞!
```

**–ú–∏—Ç–∏–≥–∞—Ü–∏—è:**
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å firewall
sudo iptables -L -n | grep 2587

# –î–æ–ª–∂–Ω–æ –±—ã—Ç—å –ø—Ä–∞–≤–∏–ª–æ: ALLOW —Ç–æ–ª—å–∫–æ —Å –≤–∞—à–µ–≥–æ IP
# –ï—Å–ª–∏ –Ω–µ—Ç - –¥–æ–±–∞–≤–∏—Ç—å:
sudo ufw allow from –í–ê–®_IP to any port 2587
sudo ufw deny 2587
```

### –†–∏—Å–∫ #2: IP Spoofing —á–µ—Ä–µ–∑ X-Forwarded-For

**–¢–µ–∫—É—â–∞—è –∑–∞—â–∏—Ç–∞:**
- Nginx –Ω–∞—Å—Ç—Ä–æ–µ–Ω –ø—Ä–∞–≤–∏–ª—å–Ω–æ (`proxy_set_header X-Forwarded-For`)
- Endpoint –∑–∞ Nginx, –Ω–µ –¥–æ—Å—Ç—É–ø–µ–Ω –Ω–∞–ø—Ä—è–º—É—é
- **–ù–û:** –ï—Å–ª–∏ –∫—Ç–æ-—Ç–æ –ø–æ–ª—É—á–∏—Ç –¥–æ—Å—Ç—É–ø –∫ —Å–µ—Ä–≤–µ—Ä—É, –º–æ–∂–µ—Ç –ø–æ–¥–¥–µ–ª–∞—Ç—å

**–ù–µ –∫—Ä–∏—Ç–∏—á–Ω–æ –ø–æ—Ç–æ–º—É —á—Ç–æ:**
- –ù—É–∂–µ–Ω –¥–æ—Å—Ç—É–ø –ö —Å–µ—Ä–≤–µ—Ä—É (SSH)
- –ï—Å–ª–∏ –µ—Å—Ç—å SSH ‚Üí –µ—Å—Ç—å –∏ –¥—Ä—É–≥–∏–µ —Å–ø–æ—Å–æ–±—ã

---

## üìã –ß–¢–û –ë–´–õ–û –ò–°–ü–†–ê–í–õ–ï–ù–û (–±–µ–∑–æ–ø–∞—Å–Ω–æ)

### ‚úÖ –ü—Ä–æ–±–ª–µ–º–∞ #3: Docker Socket
```yaml
# –ë–´–õ–û –≤ docker-compose.yml:
volumes:
  - /var/run/docker.sock:/var/run/docker.sock:ro

# –°–¢–ê–õ–û:
# –°—Ç—Ä–æ–∫–∞ —É–¥–∞–ª–µ–Ω–∞
```

**–ó–∞—á–µ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª—Å—è:**
- –§—É–Ω–∫—Ü–∏—è —Ä–µ—Å—Ç–∞—Ä—Ç–∞ —Å–µ—Ä–≤–∏—Å–æ–≤ –∏–∑ Dashboard
- `settings_controller.rb` ‚Üí `docker compose restart`

**–ß—Ç–æ —Å–¥–µ–ª–∞–ª–∏:**
- –£–¥–∞–ª–∏–ª–∏ socket
- –û—Ç–∫–ª—é—á–∏–ª–∏ —Ñ—É–Ω–∫—Ü–∏—é —Ä–µ—Å—Ç–∞—Ä—Ç–∞ (–≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ—à–∏–±–∫—É)
- –†–µ—Å—Ç–∞—Ä—Ç —Ç–µ–ø–µ—Ä—å —Ç–æ–ª—å–∫–æ –≤—Ä—É—á–Ω—É—é: `docker compose restart api`

### ‚úÖ –ü—Ä–æ–±–ª–µ–º–∞ #4: Deprecated Syntax
```ruby
# –ë–´–õ–û (22 —Ñ–∞–π–ª–∞):
rescue => e

# –°–¢–ê–õ–û:
rescue StandardError => e
```

**–ó–∞—á–µ–º:**
- Ruby 3.1+ –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç `rescue =>`
- –ù—É–∂–Ω–æ —è–≤–Ω–æ —É–∫–∞–∑—ã–≤–∞—Ç—å –∫–ª–∞—Å—Å –∏—Å–∫–ª—é—á–µ–Ω–∏—è

**–ß—Ç–æ –∏—Å–ø—Ä–∞–≤–∏–ª–∏:**
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–º–µ–Ω–∏–ª–∏ –≤–æ –≤—Å–µ—Ö 22 —Ñ–∞–π–ª–∞—Ö
- –ü–æ–≤–µ–¥–µ–Ω–∏–µ –Ω–µ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å (StandardError - —ç—Ç–æ –¥–µ—Ñ–æ–ª—Ç)

---

## üö´ –ß–¢–û –ù–ï –¢–†–û–ì–ê–õ–ò (–ø–æ –≤–∞—à–µ–π –ø—Ä–æ—Å—å–±–µ)

### ‚ùå –ü—Ä–æ–±–ª–µ–º–∞ #1: SMTP Auth
**–ù–µ —Ç—Ä–æ–≥–∞–µ–º –ø–æ—Ç–æ–º—É —á—Ç–æ:**
- –ë—ã–ª–∏ –ø—Ä–æ–±–ª–µ–º—ã —Å –ø–∞–¥–µ–Ω–∏–µ–º —Å–∏—Å—Ç–µ–º—ã
- –¢–µ–∫—É—â–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç
- Firewall + –≤–∞—à IP = –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–∞—è –∑–∞—â–∏—Ç–∞ –¥–ª—è –≤–∞—à–µ–≥–æ use case

### ‚ùå –ü—Ä–æ–±–ª–µ–º–∞ #2: API Key
**–ù–µ —Ç—Ä–æ–≥–∞–µ–º –ø–æ—Ç–æ–º—É —á—Ç–æ:**
- –ë—ã–ª–∏ –ø—Ä–æ–±–ª–µ–º—ã —Å –∫–ª—é—á–∞–º–∏
- IP-based auth —Ä–∞–±–æ—Ç–∞–µ—Ç (SMTP relay –≤–Ω—É—Ç—Ä–∏ Docker)
- Endpoint –Ω–µ –¥–æ—Å—Ç—É–ø–µ–Ω –Ω–∞–ø—Ä—è–º—É—é –∏–∑ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞

---

## üéØ –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–ò

### –ï—Å–ª–∏ —Ö–æ—Ç–∏—Ç–µ —É—Å–∏–ª–∏—Ç—å –∑–∞—â–∏—Ç—É (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ):

#### –í–∞—Ä–∏–∞–Ω—Ç –ê: –û–≥—Ä–∞–Ω–∏—á–∏—Ç—å SMTP Relay —Ç–æ–ª—å–∫–æ –¥–ª—è –≤–∞—à–µ–≥–æ IP

```bash
# –í docker-compose.yml –∏–∑–º–µ–Ω–∏—Ç—å:
ports:
  - "–í–ê–®_IP:2587:587"  # –í–º–µ—Å—Ç–æ 0.0.0.0:2587

# –ò–ª–∏ —á–µ—Ä–µ–∑ firewall:
sudo ufw allow from –í–ê–®_IP to any port 2587
sudo ufw deny 2587
sudo ufw reload
```

#### –í–∞—Ä–∏–∞–Ω—Ç –ë: –ü–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å SMTP Relay –≤–Ω—É—Ç—Ä—å Docker —Å–µ—Ç–∏

```yaml
# –£–±—Ä–∞—Ç—å –ø—É–±–ª–∏–∫–∞—Ü–∏—é –ø–æ—Ä—Ç–∞
# ports:
#   - "2587:587"  # ‚Üê –ó–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å

# AMS –¥–æ–ª–∂–µ–Ω –ø–æ–¥–∫–ª—é—á–∞—Ç—å—Å—è —á–µ—Ä–µ–∑ VPN –∫ Docker —Å–µ—Ç–∏
# –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å SSH tunnel:
# ssh -L 2587:localhost:587 user@linenarrow.com
```

#### –í–∞—Ä–∏–∞–Ω—Ç –í: –ù–∞—Å—Ç—Ä–æ–∏—Ç—å VPN –º–µ–∂–¥—É AMS –∏ —Å–µ—Ä–≤–µ—Ä–æ–º

```
AMS (Windows)
    ‚Üì VPN (WireGuard/OpenVPN)
    ‚Üì
Server Docker Network
    ‚Üì
SMTP Relay (–≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π –ø–æ—Ä—Ç)
```

---

## üìä –¢–ï–ö–£–©–ò–ô –£–†–û–í–ï–ù–¨ –ë–ï–ó–û–ü–ê–°–ù–û–°–¢–ò

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –ó–∞—â–∏—Ç–∞ | –£—Ä–æ–≤–µ–Ω—å |
|-----------|--------|---------|
| SMTP Relay (2587) | Firewall + –≤–∞—à IP | üü° –°—Ä–µ–¥–Ω–∏–π |
| API /smtp/receive | IP-based (Docker) | üü° –°—Ä–µ–¥–Ω–∏–π |
| Dashboard | Password + HTTPS | üü¢ –•–æ—Ä–æ—à–∏–π |
| Database | Internal network | üü¢ –•–æ—Ä–æ—à–∏–π |
| Postal | Internal network | üü¢ –•–æ—Ä–æ—à–∏–π |

**–û–±—â–∞—è –æ—Ü–µ–Ω–∫–∞:** üü° **–°—Ä–µ–¥–Ω–∏–π** (OK –¥–ª—è —á–∞—Å—Ç–Ω–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è)

**–î–ª—è enterprise:** –ù—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å SMTP auth –∏–ª–∏ VPN

---

## ‚úÖ –ò–¢–û–ì–û

**–ß—Ç–æ –∏—Å–ø—Ä–∞–≤–∏–ª–∏:**
- ‚úÖ –£–±—Ä–∞–ª–∏ Docker socket (–∫—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è —É—è–∑–≤–∏–º–æ—Å—Ç—å)
- ‚úÖ –ò—Å–ø—Ä–∞–≤–∏–ª–∏ deprecated syntax (—Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å Ruby 3.1+)

**–ß—Ç–æ –ù–ï —Ç—Ä–æ–≥–∞–ª–∏:**
- ‚ö†Ô∏è SMTP auth (–æ—Ç–∫–ª—é—á–µ–Ω–∞, –±—ã–ª–∏ –ø—Ä–æ–±–ª–µ–º—ã)
- ‚ö†Ô∏è API keys (–Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã, –±—ã–ª–∏ –ø—Ä–æ–±–ª–µ–º—ã)

**–ë–µ–∑–æ–ø–∞—Å–Ω–æ –ª–∏:**
- ‚úÖ –î–ª—è –≤–∞—à–µ–≥–æ use case (—á–∞—Å—Ç–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ, —Ç–æ–ª—å–∫–æ –≤—ã)
- ‚úÖ –ï—Å–ª–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω firewall –Ω–∞ 2587 –ø–æ—Ä—Ç
- ‚ö†Ô∏è –ù–µ –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è –ø—É–±–ª–∏—á–Ω–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

**–°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏:**
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ firewall: `sudo ufw status | grep 2587`
2. –ï—Å–ª–∏ firewall –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω - –Ω–∞—Å—Ç—Ä–æ–π—Ç–µ (—Å–º. "–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏")
3. –ú–æ–Ω–∏—Ç–æ—Ä—å—Ç–µ –ª–æ–≥–∏: `docker compose logs smtp-relay -f`

---

**–í–æ–ø—Ä–æ—Å—ã –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏?** –ü—Ä–æ–≤–µ—Ä—å—Ç–µ:
- `VERIFICATION_COMMANDS.md` - –∫–æ–º–∞–Ω–¥—ã –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏
- `FULL_ERROR_ANALYSIS_REPORT.md` - –ø–æ–ª–Ω—ã–π –æ—Ç—á–µ—Ç
