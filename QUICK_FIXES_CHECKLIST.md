# ‚úÖ –ö–†–ê–¢–ö–ò–ô –ß–ï–ö–õ–ò–°–¢ –ò–°–ü–†–ê–í–õ–ï–ù–ò–ô

> **–ë—ã—Å—Ç—Ä–∞—è —Å–ø—Ä–∞–≤–∫–∞** –¥–ª—è –∫–æ–º–∞–Ω–¥—ã —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
> **–ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è**: —Å–º. `FIXES_REQUIRED.md`

---

## üî¥ –ö–†–ò–¢–ò–ß–ù–û - –°–¥–µ–ª–∞—Ç—å –î–û –¥–µ–ø–ª–æ—è –≤ production

- [ ] **#1 –ò—Å–ø—Ä–∞–≤–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É –ø–æ–¥–ø–∏—Å–∏ Postal webhook** (2-3—á)
  - –§–∞–π–ª: `services/api/app/controllers/api/v1/webhooks_controller.rb:80`
  - –ü—Ä–æ–±–ª–µ–º–∞: `# TODO: Fix Postal webhook signature verification`
  - –†–∏—Å–∫: –ü–æ–¥–¥–µ–ª—å–Ω—ã–µ webhooks –º–æ–≥—É—Ç –∏–∑–º–µ–Ω—è—Ç—å —Å—Ç–∞—Ç—É—Å—ã

- [ ] **#2 –°–æ–∑–¥–∞—Ç—å .env —Ñ–∞–π–ª** (1—á)
  - –ö–æ–º–∞–Ω–¥–∞: `cp env.example.txt .env && vim .env`
  - –ì–µ–Ω–µ—Ä–∞—Ü–∏—è: `openssl rand -hex 32` –¥–ª—è —Å–µ–∫—Ä–µ—Ç–æ–≤
  - –†–∏—Å–∫: –î–µ—Ñ–æ–ª—Ç–Ω—ã–µ –ø–∞—Ä–æ–ª–∏ "CHANGE_ME"

- [ ] **#3 –ü—Ä–æ–≤–µ—Å—Ç–∏ end-to-end —Ç–µ—Å—Ç** (4-6—á)
  - –¢–µ—Å—Ç: AMS ‚Üí SMTP Relay ‚Üí API ‚Üí Postal ‚Üí Email
  - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å: tracking (opens/clicks), webhooks
  - –†–∏—Å–∫: –ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ, —Ä–∞–±–æ—Ç–∞–µ—Ç –ª–∏ —Å–∏—Å—Ç–µ–º–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é

---

## üü° –í–ê–ñ–ù–û - –°–¥–µ–ª–∞—Ç—å –≤ –ø–µ—Ä–≤—É—é –Ω–µ–¥–µ–ª—é

- [ ] **#4 –î–æ–±–∞–≤–∏—Ç—å SMTP rate limiting** (3-4—á)
  - –§–∞–π–ª: `services/smtp-relay/plugins/smtp_auth.js`
  - –†–µ—à–µ–Ω–∏–µ: Redis counter –¥–ª—è IP + username
  - –†–∏—Å–∫: Brute force –∞—Ç–∞–∫–∞ –Ω–∞ SMTP

- [ ] **#5 –ù–∞—Å—Ç—Ä–æ–∏—Ç—å backup –ë–î** (2-3—á)
  - –°–æ–∑–¥–∞—Ç—å: `/etc/cron.daily/backup-postal-db.sh`
  - –ö–æ–º–∞–Ω–¥—ã: `pg_dump`, `mysqldump` –≤ cron
  - –†–∏—Å–∫: –ü–æ—Ç–µ—Ä—è –¥–∞–Ω–Ω—ã—Ö –ø—Ä–∏ –æ—Ç–∫–∞–∑–µ –¥–∏—Å–∫–∞

- [ ] **#6 –î–æ–±–∞–≤–∏—Ç—å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥** (6-8—á)
  - –î–æ–±–∞–≤–∏—Ç—å: Prometheus + Grafana –≤ docker-compose
  - –ú–µ—Ç—Ä–∏–∫–∏: CPU, RAM, queue size, error rate
  - –†–∏—Å–∫: –ù–µ —É–≤–∏–¥–∏—Ç–µ –ø—Ä–æ–±–ª–µ–º—ã –¥–æ –æ—Ç–∫–∞–∑–∞

- [ ] **#7 –ù–∞–ø–∏—Å–∞—Ç—å —Ç–µ—Å—Ç—ã –¥–ª—è SMTP Relay** (8-10—á)
  - –°–æ–∑–¥–∞—Ç—å: `services/smtp-relay/tests/`
  - Framework: Jest
  - –†–∏—Å–∫: –ò–∑–º–µ–Ω–µ–Ω–∏—è –º–æ–≥—É—Ç —Å–ª–æ–º–∞—Ç—å SMTP

- [ ] **#8 –í—ã–Ω–µ—Å—Ç–∏ rate limits –≤ ENV** (1-2—á)
  - –§–∞–π–ª: `services/api/config/initializers/rack_attack.rb`
  - –î–æ–±–∞–≤–∏—Ç—å: `API_RATE_LIMIT`, `API_RATE_PERIOD` –≤ .env

- [ ] **#9 –ü–æ—á–∏–Ω–∏—Ç—å Certbot restart** (1—á)
  - –§–∞–π–ª: `docker-compose.yml:445`
  - –î–æ–±–∞–≤–∏—Ç—å: `restart: unless-stopped`
  - –†–∏—Å–∫: SSL –Ω–µ –æ–±–Ω–æ–≤–∏—Ç—Å—è –ø—Ä–∏ –ø–∞–¥–µ–Ω–∏–∏

---

## üü¢ –°–†–ï–î–ù–ò–ô –ü–†–ò–û–†–ò–¢–ï–¢ - –°–¥–µ–ª–∞—Ç—å –≤ —Ç–µ—á–µ–Ω–∏–µ –º–µ—Å—è—Ü–∞

- [ ] **#10 API key expiration** (4-5—á) - –î–æ–±–∞–≤–∏—Ç—å `expires_at`, —Ä–æ—Ç–∞—Ü–∏—é
- [ ] **#11 PostgreSQL replication** (6-8—á) - Master-slave –¥–ª—è HA
- [ ] **#12 Circuit Breaker** (3-4—á) - –ó–∞—â–∏—Ç–∞ –æ—Ç –∫–∞—Å–∫–∞–¥–Ω—ã—Ö –æ—Ç–∫–∞–∑–æ–≤
- [ ] **#13 –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –ª–æ–≥–∏** (5-6—á) - ELK –∏–ª–∏ Loki
- [ ] **#14 Sidekiq health check** (1-2—á) - Healthcheck –≤ docker-compose
- [ ] **#15 Webhook retry logic** (3-4—á) - Exponential backoff
- [ ] **#16 Graceful shutdown** (2-3—á) - –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ jobs

---

## üîµ –ù–ò–ó–ö–ò–ô –ü–†–ò–û–†–ò–¢–ï–¢ - –ö–æ–≥–¥–∞ –±—É–¥–µ—Ç –≤—Ä–µ–º—è

- [ ] **#17** –ü–µ—Ä–µ–≤–µ—Å—Ç–∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é –Ω–∞ –∞–Ω–≥–ª–∏–π—Å–∫–∏–π
- [ ] **#18** –î–æ–±–∞–≤–∏—Ç—å GitHub Actions CI/CD
- [ ] **#19** Load testing –∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è memory limits
- [ ] **#20** Kubernetes + auto-scaling
- [ ] **#21** Rate limiting –¥–ª—è webhooks
- [ ] **#22** –í—ã–Ω–µ—Å—Ç–∏ –≤—Å–µ timeouts –≤ ENV
- [ ] **#23** Email —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –¥–ª—è –∞–¥–º–∏–Ω–∞

---

## üìä –ü–†–û–ì–†–ï–°–°

```
–ö–†–ò–¢–ò–ß–ù–´–ï:  [ ] [ ] [ ]           0/3   (0%)
–í–ê–ñ–ù–´–ï:     [ ] [ ] [ ] [ ] [ ] [ ]     0/6   (0%)
–°–†–ï–î–ù–ò–ï:    [ ] [ ] [ ] [ ] [ ] [ ] [ ] 0/7   (0%)

MVP (–≥–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ –¥–µ–ø–ª–æ—é):        0% ‚Üí –Ω—É–∂–Ω–æ 100% –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö
Production-Ready:                 0% ‚Üí –Ω—É–∂–Ω–æ 100% –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö + –≤–∞–∂–Ω—ã—Ö
```

---

## ‚è±Ô∏è –û–¶–ï–ù–ö–ê –í–†–ï–ú–ï–ù–ò

| –≠—Ç–∞–ø | –ó–∞–¥–∞—á–∏ | –í—Ä–µ–º—è |
|------|--------|-------|
| **MVP** | –ö—Ä–∏—Ç–∏—á–Ω—ã–µ 1-3 | 7-10 —á–∞—Å–æ–≤ |
| **Production** | + –í–∞–∂–Ω—ã–µ 4-9 | +21-28 —á–∞—Å–æ–≤ |
| **Enterprise** | + –°—Ä–µ–¥–Ω–∏–µ 10-16 | +24-36 —á–∞—Å–æ–≤ |
| **–ò–¢–û–ì–û** | –í—Å–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è | **52-74 —á–∞—Å–∞** |

---

## üöÄ –ë–´–°–¢–†–´–ô –°–¢–ê–†–¢

### –î–ª—è –¥–µ–ø–ª–æ—è –≤ production (–º–∏–Ω–∏–º—É–º):
```bash
# 1. –°–æ–∑–¥–∞—Ç—å .env
cp env.example.txt .env
# –ó–∞–ø–æ–ª–Ω–∏—Ç—å –≤—Å–µ CHANGE_ME –∑–Ω–∞—á–µ–Ω–∏—è!

# 2. –ò—Å–ø—Ä–∞–≤–∏—Ç—å webhook signature
vim services/api/app/controllers/api/v1/webhooks_controller.rb
# –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å verify_postal_signature

# 3. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å
docker compose up -d
# –ü—Ä–æ–≤–µ—Å—Ç–∏ –ø–æ–ª–Ω—ã–π end-to-end —Ç–µ—Å—Ç

# 4. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å backups
# –°–æ–∑–¥–∞—Ç—å cron job –¥–ª—è pg_dump
```

### –î–ª—è production-ready (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è):
```bash
# + –≤—Å–µ –∏–∑ "–º–∏–Ω–∏–º—É–º"
# + –¥–æ–±–∞–≤–∏—Ç—å Prometheus/Grafana
# + –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å SMTP rate limiting
# + –Ω–∞–ø–∏—Å–∞—Ç—å —Ç–µ—Å—Ç—ã –¥–ª—è SMTP Relay
```

---

## üìû –ù–£–ñ–ù–ê –ü–û–ú–û–©–¨?

- **–ö—Ä–∏—Ç–∏—á–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã**: —Å–º. `FIXES_REQUIRED.md` —Ä–∞–∑–¥–µ–ª üî¥
- **–í—Å–µ –æ—Å—Ç–∞–ª—å–Ω—ã–µ**: —Å–º. `FIXES_REQUIRED.md` —Å –ø–æ–¥—Ä–æ–±–Ω—ã–º–∏ —Ä–µ—à–µ–Ω–∏—è–º–∏
- **–í–æ–ø—Ä–æ—Å—ã**: —Å–æ–∑–¥–∞—Ç—å issue –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏

---

**–û–±–Ω–æ–≤–ª–µ–Ω–æ**: 2026-01-02
**–í–µ—Ä—Å–∏—è**: 1.0
