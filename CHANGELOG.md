# Changelog - Email Sender Infrastructure

–ò—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π –∏ –≤–∞–∂–Ω—ã—Ö –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π –ø—Ä–æ–µ–∫—Ç–∞.

## 2025-01-07 - Bounce Handling Implementation

### ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ
- **–î–≤—É—Ö—á–∞—Å—Ç–Ω–∞—è —Å—Ç—Ä–∞—Ç–µ–≥–∏—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—Ç–∫–∞–∑–æ–≤:**
  - –û—Å—Ç–∞–Ω–æ–≤–∫–∞ —Ä–∞—Å—Å—ã–ª–æ–∫ –ø—Ä–∏ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö bounce (rate_limit, spam_block, mailbox_full, temporary, connection)
  - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ bounce list (—Ç–æ–ª—å–∫–æ quality issues: user_not_found, spam_block, mailbox_full, authentication)

- **–ù–æ–≤—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:**
  - `ErrorClassifier` - –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è 7 –∫–∞—Ç–µ–≥–æ—Ä–∏–π bounce
  - `BouncedEmail` –º–æ–¥–µ–ª—å —Å —É—Å–ª–æ–≤–Ω–æ–π –∑–∞–ø–∏—Å—å—é –≤ bounce list
  - `BounceStatusController` - API endpoint –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å—Ç–∞—Ç—É—Å–∞
  - `MonitorBounceCategoriesJob` - –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ bounce rates
  - `CleanupOldBouncesJob` - –æ—á–∏—Å—Ç–∫–∞ —Å—Ç–∞—Ä—ã—Ö –∑–∞–ø–∏—Å–µ–π (90 –¥–Ω–µ–π)
  - `BounceSchedulerJob` - –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—á–∏—Å—Ç–∫–∏

- **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:**
  - –ú–∏–≥—Ä–∞—Ü–∏–∏ 017-019 —Å –ø—Ä–æ–≤–µ—Ä–∫–∞–º–∏ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è —Ç–∞–±–ª–∏—Ü
  - –ú–µ—Ç–æ–¥ `BouncedEmail.blocked?` —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º SQL OR —É—Å–ª–æ–≤–∏–µ–º
  - Health check —Å –ø—Ä–æ–≤–µ—Ä–∫–æ–π bounce —Ç–∞–±–ª–∏—Ü
  - CSV —ç–∫—Å–ø–æ—Ä—Ç —Å –¥–µ—Ç–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–º —Å—Ç–∞—Ç—É—Å–æ–º bounce

### üìù –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- `docs/BOUNCE_HANDLING.md` - –ø–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ –æ–±—Ä–∞–±–æ—Ç–∫–µ –æ—Ç–∫–∞–∑–æ–≤

---

## 2024-12-25 - Security Improvements

### ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–ø–∏—Å–∏ webhooks –æ—Ç Postal
- Rate limiting —á–µ—Ä–µ–∑ Rack::Attack
- CORS –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ (—É–±—Ä–∞–Ω—ã wildcard)
- –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –¥–ª—è Sidekiq Web UI
- –í–∞–ª–∏–¥–∞—Ü–∏—è ENV –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö
- –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω—ã–π SSL –≤ production

### üìù –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- `docs/SECURITY.md` - –ø–æ–ª–∏—Ç–∏–∫–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

---

## 2024-12-25 - SMTP Relay Fix

### ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ
- –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π endpoint –≤ SMTP Relay (`/api/v1/emails/receive` ‚Üí `/api/v1/smtp/receive`)
- –ù–µ—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —Ñ–æ—Ä–º–∞—Ç–∞ payload –º–µ–∂–¥—É SMTP Relay –∏ API
- –û–±—Ä–∞–±–æ—Ç–∫–∞ job'–æ–≤ —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º —Ñ–æ—Ä–º–∞—Ç–æ–º –¥–∞–Ω–Ω—ã—Ö

### üìù –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- `SMTP_FIX_DEPLOYMENT.md` (—É—Å—Ç–∞—Ä–µ–ª, –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –≤ —ç—Ç–æ–º —Ñ–∞–π–ª–µ)

---

## 2024-12-25 - Postal API Key Fix

### ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ
- –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `POSTAL_SIGNING_KEY` –≤–º–µ—Å—Ç–æ `POSTAL_API_KEY` –≤ docker-compose.yml
- –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –¥–≤—É—Ö —Ä–∞–∑–Ω—ã—Ö –∫–ª—é—á–µ–π Postal (signing key vs API key)

### üìù –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- `POSTAL_API_KEY_FIX.md` (—É—Å—Ç–∞—Ä–µ–ª, –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –≤ —ç—Ç–æ–º —Ñ–∞–π–ª–µ)

---

## 2024-12-25 - Installation Fixes

### ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ
- –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —Ñ–∞–π–ª–∞ `.env` –ø—Ä–∏ —É—Å—Ç–∞–Ω–æ–≤–∫–µ
- –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ `config/htpasswd` –¥–ª—è Nginx
- –ù–µ–ø–æ–¥—Å—Ç–∞–≤–ª–µ–Ω–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –≤ `postal.yml`
- –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —É—Ç–∏–ª–∏—Ç—ã `envsubst` –Ω–∞ Ubuntu 22.04
- –ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è –∫–æ–º–∞–Ω–¥–∞ –∑–∞–ø—É—Å–∫–∞ Postal

### üìù –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- `INSTALLATION_FIX.md` (—É—Å—Ç–∞—Ä–µ–ª, –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –≤ —ç—Ç–æ–º —Ñ–∞–π–ª–µ)

---

## 2024-12-25 - Initial Setup

### ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ
- Docker Compose –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞
- Postal mail server –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
- SMTP Relay —Å Haraka
- Web Dashboard —Å Tailwind CSS
- AI Analytics —á–µ—Ä–µ–∑ OpenRouter
- Email flow: AMS ‚Üí Haraka ‚Üí API ‚Üí Postal

### üìù –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- `docs/ARCHITECTURE.md` - –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º—ã
- `docs/API.md` - API –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- `docs/DEPLOYMENT.md` - —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—é
- `SETUP_GUIDE.md` - —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —É—Å—Ç–∞–Ω–æ–≤–∫–µ
- `QUICK_START.md` - –±—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

---

## –ü—Ä–∏–º–µ—á–∞–Ω–∏—è

- –í—Å–µ —É—Å—Ç–∞—Ä–µ–≤—à–∏–µ –æ—Ç—á–µ—Ç—ã –∏ –ø–ª–∞–Ω—ã —É–¥–∞–ª–µ–Ω—ã
- –ê–∫—Ç—É–∞–ª—å–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ –ø–∞–ø–∫–µ `docs/`
- –î–ª—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `SETUP_GUIDE.md` –∏–ª–∏ `QUICK_START.md`
- –î–ª—è API –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `docs/API.md`
- –î–ª—è troubleshooting –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `docs/TROUBLESHOOTING.md`

