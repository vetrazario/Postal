<div class="space-y-6">
  <div class="sm:flex sm:items-center sm:justify-between">
    <div>
      <h1 class="text-3xl font-bold tracking-tight text-gray-900"><%= @template.name %></h1>
      <p class="mt-2 text-sm text-gray-700">
        <code class="rounded bg-gray-100 px-2 py-1 text-xs"><%= @template.external_id %></code>
      </p>
    </div>
    <div class="mt-4 flex gap-2 sm:ml-16 sm:mt-0">
      <%= link_to edit_dashboard_template_path(@template), class: "rounded-md bg-white px-3 py-2 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50" do %>
        Edit
      <% end %>
      <%= button_to dashboard_template_path(@template), method: :delete, data: { confirm: 'Are you sure?' }, class: "rounded-md bg-red-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-red-500" do %>
        Delete
      <% end %>
    </div>
  </div>

  <!-- Template Info -->
  <div class="rounded-lg bg-white shadow-sm ring-1 ring-gray-900/5">
    <dl class="divide-y divide-gray-100">
      <div class="px-4 py-6 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6">
        <dt class="text-sm font-medium text-gray-900">Status</dt>
        <dd class="mt-1 text-sm leading-6 text-gray-700 sm:col-span-2 sm:mt-0">
          <% if @template.active? %>
            <span class="inline-flex items-center rounded-md bg-green-50 px-2 py-1 text-xs font-medium text-green-700 ring-1 ring-inset ring-green-600/20">
              Active
            </span>
          <% else %>
            <span class="inline-flex items-center rounded-md bg-gray-50 px-2 py-1 text-xs font-medium text-gray-600 ring-1 ring-inset ring-gray-500/10">
              Inactive
            </span>
          <% end %>
        </dd>
      </div>

      <div class="px-4 py-6 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6">
        <dt class="text-sm font-medium text-gray-900">External ID</dt>
        <dd class="mt-1 text-sm leading-6 text-gray-700 sm:col-span-2 sm:mt-0">
          <code class="rounded bg-gray-100 px-2 py-1 text-xs"><%= @template.external_id %></code>
        </dd>
      </div>

      <div class="px-4 py-6 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6">
        <dt class="text-sm font-medium text-gray-900">Usage</dt>
        <dd class="mt-1 text-sm leading-6 text-gray-700 sm:col-span-2 sm:mt-0">
          <%= @template.email_logs.count %> emails sent
        </dd>
      </div>

      <div class="px-4 py-6 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6">
        <dt class="text-sm font-medium text-gray-900">Created</dt>
        <dd class="mt-1 text-sm leading-6 text-gray-700 sm:col-span-2 sm:mt-0">
          <%= @template.created_at.strftime('%Y-%m-%d %H:%M:%S') %>
        </dd>
      </div>

      <div class="px-4 py-6 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6">
        <dt class="text-sm font-medium text-gray-900">HTML Content</dt>
        <dd class="mt-1 text-sm leading-6 text-gray-700 sm:col-span-2 sm:mt-0">
          <pre class="rounded-lg bg-gray-50 p-4 overflow-x-auto font-mono text-xs"><%= @template.html_content %></pre>
        </dd>
      </div>
    </dl>
  </div>

  <!-- Preview -->
  <div class="rounded-lg bg-white shadow-sm ring-1 ring-gray-900/5">
    <div class="px-4 py-5 sm:p-6">
      <h3 class="text-base font-semibold leading-6 text-gray-900">Preview</h3>
      <div class="mt-4 rounded-lg border border-gray-200 p-4">
        <%= sanitize @template.html_content, tags: %w[h1 h2 h3 h4 h5 h6 p br div span a img table tr td th thead tbody ul ol li strong em b i u blockquote hr], attributes: %w[href src alt title class style width height align valign border cellpadding cellspacing] %>
      </div>
      <p class="mt-2 text-sm text-gray-500">This is a preview with no variables rendered</p>
    </div>
  </div>

  <div class="flex gap-2">
    <%= link_to "Back to Templates", dashboard_templates_path, class: "rounded-md bg-white px-3 py-2 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50" %>
  </div>
</div>
